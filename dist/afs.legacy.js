var t,i;t=this,i=function(t){class i{constructor(t=!1,i="info"){this.enabled=t,this.level=i,this.levels={error:0,warn:1,info:2,debug:3}}t(t,...i){this.enabled&&this.levels[t]<=this.levels[this.level]&&((new Date).toISOString(),t.toUpperCase())}error(...t){this.t("error",...t)}warn(...t){this.t("warn",...t)}info(...t){this.t("info",...t)}debug(...t){this.t("debug",...t)}setDebugMode(t,i="info"){this.enabled=t,this.levels.hasOwnProperty(i)&&(this.level=i),this.t("info",`Debug mode ${t?"enabled":"disabled"} with level: ${i}`)}}class s{static defaults={containerSelector:".afs-filter-container",itemSelector:".afs-filter-item",filterButtonSelector:".afs-btn-filter",searchInputSelector:".afs-filter-search",counterSelector:".afs-filter-counter",activeClass:"active",hiddenClass:"hidden",filterMode:"OR",searchKeys:["title"],debounceTime:300,debug:!1,logLevel:"info",dateFormat:"YYYY-MM-DD",counter:{template:"Showing {visible} of {total}",showFiltered:!0,filteredTemplate:"({filtered} filtered)",noResultsTemplate:"No items found",formatter:t=>t.toLocaleString()},styles:{slider:{ui:{showHistogram:!1,bins:10,track:{radius:"0",background:"#e5e7eb"},thumb:{radius:"50%",size:"16px",background:"#000"},histogram:{background:"#e5e7eb",bar:{background:"#000"}}}},pagination:{ui:{button:{background:"transparent",border:"1px solid #000",borderRadius:"4px",padding:"8px 12px",color:"#000",active:{background:"#000",color:"#fff"},hover:{background:"#000",color:"#fff"}}}},colors:{primary:"#000",background:"#e5e7eb",text:"#000"}},slider:{containerClass:"afs-range-slider",trackClass:"afs-range-track",thumbClass:"afs-range-thumb",valueClass:"afs-range-value",selectedClass:"afs-range-selected"},pagination:{enabled:!1,itemsPerPage:10,container:".afs-pagination-container",pageButtonClass:"afs-page-button",activePageClass:"afs-page-active",containerClass:"afs-pagination",scrollToTop:!1,scrollOffset:50,scrollBehavior:"smooth"},animation:{type:"fade",duration:300,easing:"ease-out",inClass:"afs-animation-enter",outClass:"afs-animation-leave"}};constructor(t={}){this.options=this.mergeOptions(s.defaults,t),this.initializeStyles(),this.validate()}initializeStyles(){const t=s.defaults.styles,i=this.options.styles||{};this.options.styles=this.mergeOptions(t,i),this.options.styles.colors={...t.colors,...i.colors||{}}}mergeOptions(t,i){const s={...t};for(const e in i)null===i[e]||"object"!=typeof i[e]||Array.isArray(i[e])?void 0!==i[e]&&(s[e]=i[e]):(t[e]&&"object"==typeof t[e]||(s[e]={}),s[e]=this.mergeOptions(s[e],i[e]));return s}validate(){const t=["containerSelector","itemSelector"];for(const i of t)if("string"!=typeof this.options[i])throw Error(i+" must be a string");if("number"!=typeof this.options.animation.duration||this.options.animation.duration<0)throw Error("animationDuration must be a positive number");if(!["OR","AND"].includes(this.options.filterMode.toUpperCase()))throw Error('filterMode must be either "OR" or "AND"');if(!Array.isArray(this.options.searchKeys)||0===this.options.searchKeys.length)throw Error("searchKeys must be a non-empty array");if(this.options.counter){if("string"!=typeof this.options.counter.template)throw Error("counter.template must be a string");"boolean"!=typeof this.options.counter.showFiltered&&(this.options.counter.showFiltered=!0),"function"!=typeof this.options.counter.formatter&&(this.options.counter.formatter=t=>t.toLocaleString())}else this.options.counter={...s.defaults.counter}}get(t){return t.split(".").reduce(((t,i)=>t?.[i]),this.options)}set(t,i){const s=t.split("."),e=s.pop();s.reduce(((t,i)=>(i in t||(t[i]={}),t[i])),this.options)[e]=i,this.validate()}update(t){this.options=this.mergeOptions(this.options,t),this.validate()}reset(){this.options={...s.defaults}}export(){return{...this.options}}}class e{constructor(){this.state={filters:{current:new Set(["*"]),groups:new Map,ranges:new Map,dateRanges:new Map,mode:"OR",groupMode:"OR"},search:{query:"",keys:["title"]},sort:{orders:{},current:null},items:{visible:new Set,total:0},pagination:{currentPage:1,itemsPerPage:10,totalPages:0}}}getState(){return this.state}setState(t,i){const s=t.split(".");let e=this.state;for(let t=0;t<s.length-1;t++)s[t]in e||(e[s[t]]={}),e=e[s[t]];e[s[s.length-1]]=i}export(){return{filters:{current:Array.from(this.state.filters.current),groups:Array.from(this.state.filters.groups.entries()),ranges:Array.from(this.state.filters.ranges.entries()),dateRanges:Array.from(this.state.filters.dateRanges.entries()),mode:this.state.filters.mode,groupMode:this.state.filters.groupMode},search:{...this.state.search},sort:{...this.state.sort},pagination:{...this.state.pagination}}}import(t){t.filters&&(this.state.filters.current=new Set(t.filters.current),this.state.filters.groups=new Map(t.filters.groups),this.state.filters.ranges=new Map(t.filters.ranges),this.state.filters.dateRanges=new Map(t.filters.dateRanges),this.state.filters.mode=t.filters.mode,this.state.filters.groupMode=t.filters.groupMode),t.search&&(this.state.search={...t.search}),t.sort&&(this.state.sort={...t.sort}),t.pagination&&(this.state.pagination={...t.pagination})}reset(){this.state={filters:{current:new Set(["*"]),groups:new Map,ranges:new Map,dateRanges:new Map,mode:"OR",groupMode:"OR"},search:{query:"",keys:["title"]},sort:{orders:{},current:null},items:{visible:new Set,total:0},pagination:{currentPage:1,itemsPerPage:10,totalPages:0}}}}class n{constructor(t){this.options=t,this.styleElement=null}createBaseStyles(){const t=this.options.get("hiddenClass")||"hidden",i=this.options.get("itemSelector")||".afs-filter-item",s=this.options.get("filterButtonSelector")||".afs-btn-filter",e=this.options.get("activeClass")||"active",n=this.options.get("animation.duration")||"300ms",r=this.options.get("animation.easing")||"ease-out";return`\n      .${t} {\n        display: none !important;\n      }\n\n      ${i} {\n        opacity: 1;\n        transform: scale(1);\n        filter: blur(0);\n        transition: opacity ${n} ${r},\n                    transform ${n} ${r},\n                    filter ${n} ${r};\n      }\n\n      ${i}.${t} {\n        opacity: 0;\n        transform: scale(0.95);\n        filter: blur(5px);\n      }\n\n      ${s} {\n        opacity: 0.5;\n        transition: opacity ${n} ${r};\n      }\n\n      ${s}.${e} {\n        opacity: 1;\n      }\n    `}createRangeStyles(){const t=this.options.get("styles"),i=this.options.get("slider")||{},s=t.slider,e=t.colors;return`\n    /* Range Slider Styles */\n    .${i.containerClass||"afs-range-slider"} {\n      position: relative;\n      width: auto;\n      height: 40px;\n      margin: 10px 0;\n      padding: 0 8px;\n    }\n\n    .${i.trackClass||"afs-range-track"} {\n      position: absolute;\n      top: 50%;\n      transform: translateY(-50%);\n      width: 100%;\n      height: 4px;\n      background: ${s.ui.track.background||e.background};\n      border-radius: ${s.ui.track.radius||"0"};\n    }\n\n    .${i.thumbClass||"afs-range-thumb"} {\n      position: absolute;\n      top: 50%;\n      width: ${s.ui.thumb.size||"16px"};\n      height: ${s.ui.thumb.size||"16px"};\n      background: ${s.ui.thumb.background||e.primary};\n      border-radius: ${s.ui.thumb.radius||"50%"};\n      transform: translate(-50%, -50%);\n      cursor: pointer;\n      z-index: 2;\n    }\n\n    .${i.valueClass||"afs-range-value"} {\n      position: absolute;\n      top: -20px;\n      transform: translateX(-50%);\n      font-size: 10px;\n      color: ${e.text};\n    }\n\n    .${i.selectedClass||"afs-range-selected"} {\n      position: absolute;\n      height: 4px;\n      background: ${e.primary};\n      top: 50%;\n      transform: translateY(-50%);\n    }\n\n    /* Histogram Styles */\n    .afs-histogram {\n      position: absolute;\n      bottom: 22px;\n      left: 8px;\n      right: 8px;\n      height: 20px;\n      display: flex;\n      align-items: flex-end;\n      gap: 1px;\n      opacity: 0.5;\n    }\n\n    .afs-histogram-bar {\n      flex: 1;\n      background-color: ${s.ui.histogram.background||e.background};\n      min-height: 4px;\n      transition: background-color 0.2s ease;\n    }\n\n    .afs-histogram-bar.active {\n      background-color: ${s.ui.histogram.bar.background||e.primary};\n    }\n  `}createDateStyles(){const t=this.options.get("styles").colors;return`\n    .afs-date-range-container {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 1rem;\n      margin: 10px 0;\n    }\n\n    .afs-date-input-wrapper {\n      flex: 1;\n    }\n\n    .afs-date-input-wrapper label {\n      display: block;\n      font-size: 0.875rem;\n      color: ${t.text};\n      margin-bottom: 0.5rem;\n    }\n\n    .afs-date-input {\n      width: 100%;\n      padding: 0.5rem;\n      border: 1px solid ${t.background};\n      border-radius: 0.25rem;\n      font-size: 0.875rem;\n      color: ${t.text};\n      transition: border-color 0.2s ease;\n    }\n\n    .afs-date-input:focus {\n      outline: none;\n      border-color: ${t.primary};\n    }\n  `}createInputRangeStyles(){const t=this.options.get("styles").colors;return`\n        .afs-input-range-container {\n            display: flex;\n            flex-wrap: wrap;\n            gap: 1rem;\n            margin: 10px 0;\n        }\n\n        .afs-input-wrapper {\n            flex: 1;\n        }\n\n        .afs-input-label {\n            display: block;\n            font-size: 0.875rem;\n            color: ${t.text};\n            margin-bottom: 0.5rem;\n        }\n\n        .afs-input {\n            width: 100%;\n            padding: 0.5rem;\n            border: 1px solid ${t.background};\n            border-radius: 0.25rem;\n            font-size: 0.875rem;\n            color: ${t.text};\n            transition: border-color 0.2s ease;\n        }\n\n        .afs-input:focus {\n            outline: none;\n            border-color: ${t.primary};\n        }\n    `}applyStyles(){try{const t=`\n      /* Base styles */\n      ${this.createBaseStyles()}\n\n      /* Range slider styles */\n      ${this.createRangeStyles()}\n\n      /* Date filter styles */\n      ${this.createDateStyles()}\n\n      /* Pagination styles */\n      ${this.createPaginationStyles()}\n\n      /* Search styles */\n      ${this.createSearchStyles()}\n\n      /* Input range styles */\n      ${this.createInputRangeStyles()}\n    `;this.styleElement?this.styleElement.textContent=t:(this.styleElement=document.createElement("style"),this.styleElement.textContent=t,document.head.appendChild(this.styleElement))}catch(t){const i=this.createBaseStyles();this.styleElement?this.styleElement.textContent=i:(this.styleElement=document.createElement("style"),this.styleElement.textContent=i,document.head.appendChild(this.styleElement))}}createPaginationStyles(){const t=this.options.get("styles"),i=this.options.get("pagination")||{},s=this.options.get("styles").colors,e=i.pageButtonClass||"afs-page-button",n=t.pagination;return`\n      .${i.containerClass||"afs-pagination"} {\n        display: flex;\n        justify-content: center;\n        gap: 8px;\n        margin-top: 20px;\n      }\n\n      .${e} {\n        padding: ${n.ui.button.padding||"8px 12px"};\n        border: ${n.ui.button.border||"1px solid "+s.primary};\n        border-radius: ${n.ui.button.borderRadius||"4px"};\n        cursor: pointer;\n        transition: all 200ms ease-out;\n        background: ${n.ui.button.background||"transparent"};\n        color: ${n.ui.button.color||s.primary};\n      }\n\n      .${e}:hover {\n        background: ${n.ui.button.hover.background||s.primary};\n        color: ${n.ui.button.hover.color||"white"};\n      }\n\n      .${e}.${i.activePageClass||"afs-page-active"} {\n        background: ${n.ui.button.active.background||s.primary};\n        color: ${n.ui.button.active.color||"white"};\n      }\n\n      .${e}:disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n      }\n    `}createSearchStyles(){const t=this.options.get("searchInputClass")||"afs-search",i=this.options.get("styles").colors;return`\n      .${t} {\n        padding: 8px;\n        border: 1px solid ${i.background};\n        border-radius: 4px;\n        width: 100%;\n        max-width: 300px;\n        transition: border-color 200ms ease-out;\n      }\n\n      .${t}:focus {\n        outline: none;\n        border-color: ${i.primary};\n      }\n    `}updateStyles(t){this.options=t,this.applyStyles()}removeStyles(){this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}}class r{constructor(){this.events=new Map,this.onceEvents=new Map}on(t,i){return this.events.has(t)||this.events.set(t,new Set),this.events.get(t).add(i),()=>this.off(t,i)}once(t,i){const s=(...e)=>{this.off(t,s),i.apply(this,e)};return this.onceEvents.has(t)||this.onceEvents.set(t,new Map),this.onceEvents.get(t).set(i,s),this.on(t,s)}off(t,i){if(this.events.has(t)&&(this.events.get(t).delete(i),0===this.events.get(t).size&&this.events.delete(t)),this.onceEvents.has(t)){const s=this.onceEvents.get(t).get(i);s&&(this.events.get(t)?.delete(s),this.onceEvents.get(t).delete(i)),0===this.onceEvents.get(t).size&&this.onceEvents.delete(t)}}emit(t,...i){this.events.has(t)&&this.events.get(t).forEach((t=>{try{t.apply(this,i)}catch(t){}}))}removeAllListeners(t){t?(this.events.delete(t),this.onceEvents.delete(t)):(this.events.clear(),this.onceEvents.clear())}listenerCount(t){return(this.events.get(t)?.size||0)+(this.onceEvents.get(t)?.size||0)}}class a{constructor(t){this.afs=t,this.options=this.afs.options,this.animations={fade:{in:{opacity:1,transform:"scale(1)",transitionTimingFunction:"ease-in"},out:{opacity:0,transform:"scale(0.95)",transitionTimingFunction:"ease-out"}},slide:{in:{opacity:1,transform:"translateY(0)",transitionTimingFunction:"ease-in-out"},out:{opacity:0,transform:"translateY(20px)",transitionTimingFunction:"ease-in-out"}},scale:{in:{opacity:1,transform:"scale(1)",transitionTimingFunction:"ease-in"},out:{opacity:0,transform:"scale(0.8)",transitionTimingFunction:"ease-out"}},rotate:{in:{opacity:1,transform:"rotate(0deg) scale(1)",transitionTimingFunction:"ease-in"},out:{opacity:0,transform:"rotate(90deg) scale(0.9)",transitionTimingFunction:"ease-out"}},flip:{in:{opacity:1,transform:"rotateY(0)",transitionTimingFunction:"ease-in"},out:{opacity:0,transform:"rotateY(180deg)",transitionTimingFunction:"ease-out"}},zoom:{in:{opacity:1,transform:"scale(1.2)",transitionTimingFunction:"ease-in"},out:{opacity:0,transform:"scale(0.8)",transitionTimingFunction:"ease-out"}},bounce:{in:{opacity:1,transform:"translateY(0)",animation:"bounce 1s cubic-bezier(0.68, -0.55, 0.27, 1.55)"},out:{opacity:0,transform:"translateY(-20px)",animation:"bounceOut 1s ease-out"}},blur:{in:{opacity:1,filter:"blur(0)",transitionTimingFunction:"ease-in"},out:{opacity:0,filter:"blur(5px)",transitionTimingFunction:"ease-out"}},skew:{in:{opacity:1,transform:"skew(0deg)",transitionTimingFunction:"ease-in-out"},out:{opacity:0,transform:"skew(10deg)",transitionTimingFunction:"ease-in-out"}},slideInLeft:{in:{opacity:1,transform:"translateX(0)",transitionTimingFunction:"ease-in"},out:{opacity:0,transform:"translateX(-100%)",transitionTimingFunction:"ease-out"}},slideInRight:{in:{opacity:1,transform:"translateX(0)",transitionTimingFunction:"ease-in"},out:{opacity:0,transform:"translateX(100%)",transitionTimingFunction:"ease-out"}},fadeInUp:{in:{opacity:1,transform:"translateY(0)",transitionTimingFunction:"ease-in"},out:{opacity:0,transform:"translateY(10px)",transitionTimingFunction:"ease-out"}},fadeInDown:{in:{opacity:1,transform:"translateY(0)",transitionTimingFunction:"ease-in"},out:{opacity:0,transform:"translateY(-10px)",transitionTimingFunction:"ease-out"}},bounceIn:{in:{opacity:1,transform:"scale(1.05)",transitionTimingFunction:"cubic-bezier(0.68, -0.55, 0.27, 1.55)"},out:{opacity:0,transform:"scale(0.9)",transitionTimingFunction:"ease-out"}}}}applyShowAnimation(t,i="fade"){const s=this.options.get("animation.duration")||"300ms",e=this.animations[i]?.in||this.animations.fade.in;t.style.display="block",t.style.opacity="0",requestAnimationFrame((()=>{Object.assign(t.style,e,{transition:`opacity ${s} ${e.transitionTimingFunction}, transform ${s} ${e.transitionTimingFunction}`})}))}applyHideAnimation(t,i="fade"){const s=this.options.get("animation.duration")||"300ms",e=this.animations[i]?.out||this.animations.fade.out;Object.assign(t.style,e,{transition:`opacity ${s} ${e.transitionTimingFunction}, transform ${s} ${e.transitionTimingFunction}`});const n=()=>{t.style.display="none",t.removeEventListener("transitionend",n)};t.addEventListener("transitionend",n)}setAnimation(t){this.afs.options.set("animation.type",t)}}class o{constructor(t){this.afs=t,this.animation=new a(t),this.filterButtons=new Map,this.activeFilters=new Set(["*"]),this.currentFilters=new Set(["*"]),this.filterGroups=new Map,this.sortOrders=new Map,this.setupFilters()}setupFilters(){this.afs.logger.debug("Setting up filters");const t=this.afs.options.get("filterButtonSelector");t&&(document.querySelectorAll(t).forEach((t=>{const i=t.dataset.filter;i?(this.filterButtons.set(t,i),this.bindFilterEvent(t)):this.afs.logger.warn("Filter button missing data-filter attribute:",t)})),this.afs.logger.debug("Filters initialized"))}setLogic(t){if("boolean"==typeof t)this.afs.options.set("filterMode",t?"AND":"OR");else{const i=t.toUpperCase();if(!["OR","AND"].includes(i))return void this.afs.logger.warn("Invalid filter mode: "+t);this.afs.options.set("filterMode",i)}this.afs.logger.debug("Filter logic set to: "+this.afs.options.get("filterMode")),this.applyFilters()}clearAllFilters(){this.afs.logger.debug("Clearing all filters"),this.activeFilters.clear(),this.activeFilters.add("*"),this.filterButtons.forEach(((t,i)=>{i.classList.remove(this.afs.options.get("activeClass"))})),this.filterGroups.clear();const t=this.findAllButton();t&&t.classList.add(this.afs.options.get("activeClass")),this.sortOrders.clear(),this.applyFilters(),this.afs.urlManager.updateURL(),this.afs.emit("filtersCleared")}bindFilterEvent(t){this.afs.logger.debug("Binding filter event to button:",t),t.addEventListener("click",(()=>{const i=this.filterButtons.get(t);i&&("*"===i?this.resetFilters():this.toggleFilter(i,t),this.afs.urlManager.updateURL())}))}resetFilters(){this.afs.logger.debug("Resetting filters"),this.activeFilters.clear(),this.filterButtons.forEach(((t,i)=>{i.classList.remove(this.afs.options.get("activeClass"))})),this.activeFilters.add("*");const t=this.findAllButton();t&&t.classList.add(this.afs.options.get("activeClass")),this.filterGroups.clear();const i=[];this.afs.items.forEach((t=>{const s=new Promise((i=>{t.classList.remove(this.afs.options.get("hiddenClass")),t.style.display="block",requestAnimationFrame((()=>{this.animation.applyShowAnimation(t,this.afs.options.get("animation.type")),setTimeout(i,this.afs.options.get("animation.duration")||300)}))}));i.push(s)}));const s=new Set(this.afs.items);this.afs.state.setState("items.visible",s),Promise.all(i).then((()=>{this.afs.updateCounter(),this.afs.urlManager.updateURL(),this.afs.emit("filtersReset")}))}findAllButton(){for(const[t,i]of this.filterButtons.entries())if("*"===i)return t;return null}handleFilterClick(t){const i=t.dataset.filter;this.afs.logger.debug("Filter clicked:",i),"*"===i?this.resetFilters():this.toggleFilter(i,t),this.filter(),this.updateURL()}toggleFilter(t,i){this.activeFilters.delete("*");const s=this.findAllButton();if(s&&s.classList.remove(this.afs.options.get("activeClass")),i.classList.contains(this.afs.options.get("activeClass"))){if(i.classList.remove(this.afs.options.get("activeClass")),this.activeFilters.delete(t),0===this.activeFilters.size)return void this.resetFilters()}else i.classList.add(this.afs.options.get("activeClass")),this.activeFilters.add(t);this.applyFilters(),this.afs.emit("filterToggled",{filter:t,activeFilters:Array.from(this.activeFilters)}),this.afs.logger.debug("Filter toggled:",t)}applyFilters(){const t=Array.from(this.activeFilters);this.afs.logger.debug("Active filters:",t);const i=new Set(this.afs.state.getState().items.visible),s=new Set;this.afs.items.forEach((t=>{(this.activeFilters.has("*")||this.itemMatchesFilters(t))&&s.add(t)})),this.afs.state.setState("items.visible",s);const e=[];this.afs.items.forEach((t=>{const i=new Promise((i=>{s.has(t)?(t.classList.remove(this.afs.options.get("hiddenClass")),requestAnimationFrame((()=>{this.animation.applyShowAnimation(t,this.afs.options.get("animation.type")),setTimeout(i,parseFloat(this.afs.options.get("animation.duration"))||300)}))):requestAnimationFrame((()=>{this.animation.applyHideAnimation(t,this.afs.options.get("animation.type")),setTimeout(i,parseFloat(this.afs.options.get("animation.duration"))||300)}))}));e.push(i)})),Promise.all(e).then((()=>{s.forEach((t=>{t.style.display="block",t.style.opacity="1"})),this.afs.updateCounter(),this.afs.urlManager.updateURL(),this.afs.emit("filtersApplied",{activeFilters:t,visibleItems:s.size})})),this.emitFilterEvents(i,s)}itemMatchesFilters(t){if(this.activeFilters.has("*"))return!0;const i=new Set(t.dataset.categories?.split(" ")||[]);return this.filterGroups.size>0?this.itemMatchesFilterGroups(i):"OR"===this.afs.options.get("filterMode")?this.itemMatchesAnyFilter(i):this.itemMatchesAllFilters(i)}itemMatchesAnyFilter(t){return Array.from(this.activeFilters).some((i=>"*"===i||t.has(i)))}itemMatchesAllFilters(t){return Array.from(this.activeFilters).every((i=>"*"===i||t.has(i)))}itemMatchesFilterGroups(t){const i=Array.from(this.filterGroups.values()).map((i=>0===i.filters.size||("OR"===i.operator?Array.from(i.filters).some((i=>t.has(i))):Array.from(i.filters).every((i=>t.has(i))))));return"OR"===this.afs.options.get("groupMode")?i.some((t=>t)):i.every((t=>t))}emitFilterEvents(t,i){const s=new Set([...i].filter((i=>!t.has(i)))),e=new Set([...t].filter((t=>!i.has(t))));this.afs.emit("filter",{activeFilters:Array.from(this.activeFilters),visibleItems:i.size,added:s.size,removed:e.size}),s.size>0&&this.afs.emit("itemsShown",{items:s}),e.size>0&&this.afs.emit("itemsHidden",{items:e})}addFilterGroup(t,i,s="OR"){if(this.afs.logger.debug("Adding filter group: "+t),!Array.isArray(i))return void this.afs.logger.error("Filters must be an array");const e=s.toUpperCase();["AND","OR"].includes(e)||(this.afs.logger.warn(`Invalid operator: ${s}, defaulting to OR`),s="OR"),this.filterGroups.set(t,{filters:new Set(i),operator:e}),this.applyFilters()}removeFilterGroup(t){this.filterGroups.delete(t)&&(this.afs.logger.debug("Removed filter group: "+t),0===this.filterGroups.size?this.resetFilters():this.applyFilters())}setGroupMode(t){const i=t.toUpperCase();["AND","OR"].includes(i)?(this.afs.options.set("groupMode",i),this.afs.logger.debug("Set group mode to: "+i),this.applyFilters()):this.afs.logger.warn("Invalid group mode: "+t)}addFilter(t){this.afs.logger.debug("Adding filter: "+t),"*"!==t?(this.activeFilters.delete("*"),this.activeFilters.add(t),this.filterButtons.forEach(((i,s)=>{i===t?s.classList.add(this.afs.options.get("activeClass")):"*"===i&&s.classList.remove(this.afs.options.get("activeClass"))})),this.applyFilters()):this.resetFilters()}removeFilter(t){this.afs.logger.debug("Removing filter: "+t),this.activeFilters.delete(t),this.filterButtons.forEach(((i,s)=>{i===t&&s.classList.remove(this.afs.options.get("activeClass"))})),0===this.activeFilters.size?this.resetFilters():this.applyFilters()}setFilterMode(t){this.afs.logger.debug("Setting filter mode to: "+t);const i=t.toUpperCase();["AND","OR"].includes(i)?(this.afs.options.set("filterMode",i),this.afs.logger.debug("Set filter mode to: "+i),this.applyFilters()):this.afs.logger.warn("Invalid filter mode: "+t)}getActiveFilters(){return new Set(this.activeFilters)}getFilterGroups(){return new Map(this.filterGroups)}addFilterButton(t,i){i?(this.filterButtons.set(t,i),this.bindFilterEvent(t),this.afs.logger.debug("Added filter button for: "+i)):this.afs.logger.warn("Filter value required for new filter button")}removeFilter(t){this.afs.logger.debug("Removing filter: "+t),this.activeFilters.delete(t),this.filterButtons.forEach(((i,s)=>{i===t&&s.classList.remove(this.afs.options.get("activeClass"))})),0===this.activeFilters.size?this.resetFilters():this.applyFilters()}sortWithOrder(t){this.afs.logger.debug("Sorting by "+t);try{const i=Array.from(this.afs.items),s="asc"===(this.sortOrders.get(t)||"asc")?"desc":"asc";this.sortOrders.set(t,s);const e=this.determineSortType(i[0],t);return i.sort(((i,n)=>{const r=this.getSortValue(i,t,e),a=this.getSortValue(n,t,e);return this.compareValues(r,a,s)})),this.reorderItems(i),this.afs.emit("sort",{key:t,order:s}),this.afs.logger.info(`Sorted items by ${t} in ${s} order`),s}catch(t){return this.afs.logger.error("Sort error:",t),null}}shuffle(){this.afs.logger.debug("Shuffling items");try{const t=Array.from(this.afs.items);for(let i=t.length-1;i>0;i--){const s=Math.floor(Math.random()*(i+1));[t[i],t[s]]=[t[s],t[i]]}this.reorderItems(t),this.sortOrders.clear(),this.afs.emit("shuffled",{itemCount:t.length}),this.afs.logger.debug("Items shuffled successfully")}catch(t){this.afs.logger.error("Shuffle error:",t)}}determineSortType(t,i){this.afs.logger.debug("Determining sort type for "+i);const s=t.dataset[i];return s?isNaN(s)?/^\d{4}-\d{2}-\d{2}/.test(s)?"date":"string":"number":"string"}getSortValue(t,i,s){const e=t.dataset[i];switch(s){case"number":return parseFloat(e)||0;case"date":return new Date(e).getTime()||0;default:return(e||"").toLowerCase()}}compareValues(t,i,s){if(null==t)return"asc"===s?1:-1;if(null==i)return"asc"===s?-1:1;const e=t<i?-1:t>i?1:0;return"asc"===s?e:-e}reorderItems(t){const i=document.createDocumentFragment();t.forEach((t=>i.appendChild(t))),this.afs.container.appendChild(i)}getCurrentSortOrder(t){return this.sortOrders.get(t)||"asc"}clearSortOrders(){this.afs.logger.debug("Clearing all sort orders"),this.sortOrders.clear(),this.afs.emit("sortCleared")}clearAllFilters(){this.afs.logger.debug("Clearing all filters and search"),this.activeFilters.clear(),this.activeFilters.add("*"),this.filterButtons.forEach(((t,i)=>{i.classList.remove(this.afs.options.get("activeClass"))}));const t=this.findAllButton();t&&t.classList.add(this.afs.options.get("activeClass")),document.querySelectorAll('input[type="checkbox"]').forEach((t=>{t.classList.contains(this.afs.options.get("activeClass"))&&(t.checked=!1,t.classList.remove(this.afs.options.get("activeClass")))})),this.afs.search&&this.afs.search.setValue(""),this.filterGroups.clear(),this.sortOrders.clear(),this.applyFilters(),this.afs.urlManager&&this.afs.urlManager.updateURL(),this.afs.emit("filtersCleared"),this.afs.logger.info("All filters cleared")}refresh(){this.afs.logger.debug("Refreshing view"),this.applyFilters(),this.afs.updateCounter()}removeFilterButton(t){this.filterButtons.delete(t),t.removeEventListener("click",this.handleFilterClick)}destroy(){this.filterButtons.forEach(((t,i)=>{this.removeFilterButton(i)})),this.filterButtons.clear(),this.activeFilters.clear(),this.filterGroups.clear(),this.afs.logger.debug("Filter functionality destroyed")}}const h=(t,i,s=!1)=>{let e;return function(...n){const r=this,a=s&&!e;clearTimeout(e),e=setTimeout((()=>{e=null,s||t.apply(r,n)}),i),a&&t.apply(r,n)}};class c{constructor(t){this.afs=t,this.activeRanges=new Map}addInputRange({key:t,container:i,min:s,max:e,step:n=1,label:r=""}){if(this.afs.logger.debug("Adding input range for "+t),!i)return void this.afs.logger.error("Container element required for input range");const a=this.calculateMinMax(t);s=s??a.min,e=e??a.max;const o=this.createInputElements(r),h=this.initializeState(s,e,n);this.appendElements(i,o),this.setupEventHandlers(o,h,t),this.activeRanges.set(t,{state:h,elements:o}),this.updateInputUI(t),this.afs.logger.info("Input range added for "+t)}calculateMinMax(t){try{const i=Array.from(this.afs.items).map((i=>{if(!i||!i.dataset||!i.dataset[t])return null;const s=parseFloat(i.dataset[t]);return isNaN(s)?null:s})).filter((t=>null!==t));return 0===i.length?{min:0,max:100}:{min:Math.min(...i),max:Math.max(...i)}}catch(t){return this.afs.logger.error("Error calculating range:",t),{min:0,max:100}}}createInputElements(t){const i=document.createElement("div");if(i.className="afs-input-range-container",t){const s=document.createElement("div");s.className="afs-input-range-label",s.textContent=t,i.appendChild(s)}const s=document.createElement("div");s.className="afs-input-wrapper";const e=document.createElement("label");e.textContent="Min",e.className="afs-input-label";const n=document.createElement("input");n.type="number",n.className="afs-input min",s.appendChild(e),s.appendChild(n);const r=document.createElement("div");r.className="afs-input-wrapper";const a=document.createElement("label");a.textContent="Max",a.className="afs-input-label";const o=document.createElement("input");return o.type="number",o.className="afs-input max",r.appendChild(a),r.appendChild(o),i.appendChild(s),i.appendChild(r),{container:i,minInput:n,maxInput:o}}initializeState(t,i,s){return{min:t,max:i,step:s,currentMin:t,currentMax:i}}appendElements(t,i){t.appendChild(i.container)}setupEventHandlers(t,i,s){const{minInput:e,maxInput:n}=t,r=h((()=>{const t=parseFloat(e.value),r=parseFloat(n.value);isNaN(t)||isNaN(r)||(i.currentMin=Math.max(i.min,Math.min(r,t)),i.currentMax=Math.min(i.max,Math.max(t,r)),this.updateInputUI(s),this.applyFilter(s))}),300);e.addEventListener("input",r),n.addEventListener("input",r)}updateInputUI(t){try{const{state:i,elements:s}=this.activeRanges.get(t),{minInput:e,maxInput:n}=s;e.min=i.min,e.max=i.max,e.step=i.step,n.min=i.min,n.max=i.max,n.step=i.step,e.value=i.currentMin,n.value=i.currentMax}catch(t){this.afs.logger.error("Error updating input UI:",t)}}applyFilter(t){this.afs.logger.info("Applying input filter for "+t);const{state:i}=this.activeRanges.get(t);this.afs.items.forEach((s=>{try{if(!s||!s.dataset||!s.dataset[t])return void this.afs.hideItem(s);const e=parseFloat(s.dataset[t]);if(isNaN(e))return void this.afs.hideItem(s);e>=i.currentMin&&e<=i.currentMax?this.afs.showItem(s):this.afs.hideItem(s)}catch(t){this.afs.logger.error("Error filtering item:",t),this.afs.hideItem(s)}})),this.afs.updateCounter(),this.afs.urlManager.updateURL(),this.afs.emit("inputRangeFilter",{key:t,min:i.currentMin,max:i.currentMax})}getRange(t){const i=this.activeRanges.get(t);return i?{min:i.state.currentMin,max:i.state.currentMax}:null}setRange(t,i,s){const e=this.activeRanges.get(t);e&&(e.state.currentMin=i,e.state.currentMax=s,this.updateInputUI(t),this.applyFilter(t))}removeInputRange(t){const i=this.activeRanges.get(t);i&&(i.elements.container.remove(),this.activeRanges.delete(t),this.afs.logger.info("Input range removed for "+t))}}class l{constructor(t){this.afs=t,this.searchInput=null,this.searchKeys=["title"],this.minSearchLength=2,this.highlightClass="afs-highlight",this.setupSearch()}setupSearch(){const t=this.afs.options.get("searchInputSelector");t&&(this.searchInput=document.querySelector(t),this.searchInput?(this.searchKeys=this.afs.options.get("searchKeys")||this.searchKeys,this.minSearchLength=this.afs.options.get("minSearchLength")||this.minSearchLength,this.bindSearchEvents(),this.afs.logger.debug("Search functionality initialized")):this.afs.logger.warn("Search input not found: "+t))}bindSearchEvents(){if(!this.searchInput)return;const t=h((t=>{this.search(t.target.value)}),this.afs.options.get("debounceTime")||300);this.searchInput.addEventListener("input",t),this.searchInput.addEventListener("search",(t=>{t.target.value||this.clearSearch()})),this.searchInput.addEventListener("keypress",(t=>{"Enter"===t.key&&(t.preventDefault(),this.search(t.target.value))}))}search(t){this.afs.logger.debug("Performing search:",t);const i=this.normalizeQuery(t);this.afs.state.setState("search.query",i);let s=0;if(i)if(i.length<this.minSearchLength)this.afs.logger.debug("Search query too short");else{try{const t=this.createSearchRegex(i);this.afs.items.forEach((i=>{const e=this.getItemSearchText(i);t.test(e)?(this.afs.showItem(i),this.highlightMatches(i,t),s++):(this.afs.hideItem(i),this.removeHighlights(i))})),this.afs.urlManager.updateURL(),this.afs.emit("search",{query:i,matches:s,total:this.afs.items.length}),this.afs.logger.info(`Search complete. Found ${s} matches`)}catch(t){this.afs.logger.error("Search error:",t)}setTimeout((()=>{this.afs.updateCounter()}),this.afs.options.get("animationDuration"))}else this.clearSearch()}normalizeQuery(t){return t.toLowerCase().trim().replace(/\s+/g," ")}createSearchRegex(t){const i=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").split(" ").filter(Boolean).map((t=>`(?=.*\\b${t})`)).join("");return RegExp(i,"i")}getItemSearchText(t){return this.searchKeys.map((i=>t.dataset[i]||"")).join(" ").toLowerCase()}highlightMatches(t,i){this.afs.options.get("highlightMatches")&&this.searchKeys.forEach((i=>{const s=t.querySelector(`[data-search-key="${i}"]`);if(!s)return;const e=s.textContent,n=this.afs.state.getState().search.query.split(" ");let r=e;n.forEach((t=>{if(!t)return;const i=RegExp(`(${t})`,"gi");r=r.replace(i,`<span class="${this.highlightClass}">$1</span>`)})),s.innerHTML=r}))}removeHighlights(t){this.afs.options.get("highlightMatches")&&this.searchKeys.forEach((i=>{const s=t.querySelector(`[data-search-key="${i}"]`);s&&s.querySelectorAll("."+this.highlightClass).forEach((t=>{t.replaceWith(t.textContent)}))}))}clearSearch(){this.afs.logger.debug("Clearing search"),this.searchInput&&(this.searchInput.value=""),this.afs.state.setState("search.query",""),this.afs.items.forEach((t=>{this.afs.showItem(t),this.removeHighlights(t)})),this.afs.urlManager.updateURL(),this.afs.emit("searchCleared"),setTimeout((()=>{this.afs.updateCounter()}),this.afs.options.get("animationDuration"))}setValue(t){this.searchInput&&(this.searchInput.value=t),this.search(t)}getValue(){return this.afs.state.getState().search.query}updateConfig({searchKeys:t,minSearchLength:i,highlightClass:s,debounceTime:e}={}){t&&(this.searchKeys=t),i&&(this.minSearchLength=i),s&&(this.highlightClass=s),e&&this.bindSearchEvents()}destroy(){this.searchInput&&(this.searchInput.removeEventListener("input",this.debouncedSearch),this.searchInput.removeEventListener("search",this.handleClear),this.searchInput.removeEventListener("keypress",this.handleEnter)),this.clearSearch()}}class u{constructor(t){this.afs=t,this.sortButtons=new Map,this.setupSort()}setupSort(){const t=this.afs.options.get("sortButtonSelector");t&&(document.querySelectorAll(t).forEach((t=>{const i=t.dataset.sortKey;i?(this.sortButtons.set(t,{key:i,direction:t.dataset.sortDirection||"asc"}),this.bindSortEvent(t)):this.afs.logger.warn("Sort button missing data-sort-key attribute:",t)})),this.afs.logger.debug("Sort functionality initialized"))}bindSortEvent(t){this.afs.logger.debug("Binding sort event to button:",t),t.addEventListener("click",(()=>{const i=this.sortButtons.get(t);i&&(i.direction="asc"===i.direction?"desc":"asc",this.sortButtons.set(t,i),this.updateSortButtonState(t,i),this.sort(i.key,i.direction))}))}updateSortButtonState(t,i){this.sortButtons.forEach(((t,i)=>{i.classList.remove(this.afs.options.get("activeSortClass"))})),t.classList.add(this.afs.options.get("activeSortClass"));const s=t.querySelector(".sort-direction");s&&(s.textContent="asc"===i.direction?"↑":"↓")}sort(t,i="asc"){this.afs.logger.debug(`Sorting by ${t} in ${i} order`);try{this.afs.state.setState("sort.current",{key:t,direction:i});const s=Array.from(this.afs.items),e=this.determineSortType(s[0],t);s.sort(((s,n)=>{const r=this.getSortValue(s,t,e),a=this.getSortValue(n,t,e);return this.compareValues(r,a,i)})),this.reorderItems(s),this.afs.urlManager.updateURL(),this.afs.emit("sort",{key:t,direction:i}),this.afs.logger.info(`Sorted items by ${t} ${i}`)}catch(t){this.afs.logger.error("Sort error:",t)}}determineSortType(t,i){const s=t.dataset[i];return s?isNaN(s)?/^\d{4}-\d{2}-\d{2}/.test(s)?"date":"string":"number":"string"}getSortValue(t,i,s){const e=t.dataset[i];switch(s){case"number":return parseFloat(e);case"date":return new Date(e).getTime();default:return e.toLowerCase()}}compareValues(t,i,s){const e="asc"===s?1:-1;return t===i?0:null==t?1:null==i?-1:t>i?e:-e}reorderItems(t){const i=this.afs.options.get("container"),s=document.createDocumentFragment();t.forEach((t=>s.appendChild(t))),i.appendChild(s)}sortMultiple(t){this.afs.logger.debug("Sorting by multiple criteria:",t);try{const i=Array.from(this.afs.items);i.sort(((s,e)=>{for(const{key:n,direction:r}of t){const t=this.determineSortType(i[0],n),a=this.getSortValue(s,n,t),o=this.getSortValue(e,n,t),h=this.compareValues(a,o,r);if(0!==h)return h}return 0})),this.reorderItems(i),t.length>0&&this.afs.state.setState("sort.current",t[0]),this.afs.urlManager.updateURL(),this.afs.emit("multiSort",{criteria:t})}catch(t){this.afs.logger.error("Multiple sort error:",t)}}sortWithComparator(t,i){this.afs.logger.debug(`Sorting by ${t} with custom comparator`);try{const s=Array.from(this.afs.items);s.sort(((s,e)=>i(s.dataset[t],e.dataset[t]))),this.reorderItems(s),this.afs.emit("customSort",{key:t,comparator:i})}catch(t){this.afs.logger.error("Custom sort error:",t)}}shuffle(){this.afs.logger.debug("Shuffling items");try{const t=Array.from(this.afs.items);for(let i=t.length-1;i>0;i--){const s=Math.floor(Math.random()*(i+1));[t[i],t[s]]=[t[s],t[i]]}this.reorderItems(t),this.afs.state.setState("sort.current",null),this.sortButtons.forEach(((t,i)=>{i.classList.remove(this.afs.options.get("activeSortClass"));const s=i.querySelector(".sort-direction");s&&(s.textContent="")})),this.afs.urlManager.updateURL(),this.afs.emit("shuffle")}catch(t){this.afs.logger.error("Shuffle error:",t)}}reset(){this.afs.logger.debug("Resetting sort"),this.afs.state.setState("sort.current",null),this.sortButtons.forEach(((t,i)=>{i.classList.remove(this.afs.options.get("activeSortClass"));const s=i.querySelector(".sort-direction");s&&(s.textContent="")})),this.sortButtons.forEach(((t,i)=>{t.direction="asc",this.sortButtons.set(i,t)})),this.afs.urlManager.updateURL(),this.afs.emit("sortReset")}getCurrentSort(){return this.afs.state.getState().sort.current}addSortButton(t,i,s="asc"){i?(this.sortButtons.set(t,{key:i,direction:s}),this.bindSortEvent(t),this.afs.logger.debug("Added sort button for "+i)):this.afs.logger.warn("Sort key required for new sort button")}removeSortButton(t){this.sortButtons.has(t)&&(t.removeEventListener("click",this.bindSortEvent),this.sortButtons.delete(t),this.afs.logger.debug("Removed sort button"))}destroy(){this.sortButtons.forEach(((t,i)=>{this.removeSortButton(i)})),this.sortButtons.clear(),this.afs.logger.debug("Sort functionality destroyed")}}class d{constructor(t){this.afs=t,this.container=null,this.animation=new a(t),this.options=this.afs.options.get("pagination"),this.setupPagination()}setupPagination(){if(this.afs.logger.debug("Setting up pagination"),!this.afs.options.get("pagination.enabled"))return;this.container=document.createElement("div"),this.container.className=this.options.containerClass;const t=document.querySelector(this.afs.options.get("pagination.container"));t?(t.appendChild(this.container),this.afs.state.setState("pagination",{currentPage:1,itemsPerPage:this.options.itemsPerPage,totalPages:0}),this.bindEvents(),this.update(),this.afs.logger.debug("Pagination initialized")):this.afs.logger.error("Items container not found.")}bindEvents(){this.afs.on("filter",(()=>this.update())),this.afs.on("search",(()=>this.update())),this.afs.on("sort",(()=>this.update())),this.container.addEventListener("click",(t=>{const i=t.target.closest("button");if(!i)return;const s=i.dataset.page;s&&this.goToPage(parseInt(s,10))}))}update(){const t=Array.from(this.afs.state.getState().items.visible),i=this.afs.state.getState().pagination.itemsPerPage,s=Math.max(1,Math.ceil(t.length/i)),e=this.afs.state.getState().pagination;let n=e.currentPage;n>s&&(n=s),this.afs.state.setState("pagination",{...e,currentPage:n,totalPages:s}),this.updateVisibility(t),this.renderPagination(),this.afs.urlManager.updateURL(),this.afs.emit("pagination",{currentPage:n,totalPages:s,itemsPerPage:i,visibleItems:t.length})}updateVisibility(t){const{currentPage:i,itemsPerPage:s}=this.afs.state.getState().pagination,e=(i-1)*s,n=e+s;this.afs.items.forEach((t=>{t.style.display="none",t.classList.add(this.afs.options.get("hiddenClass"))}));const r=t.slice(e,n);0===r.length&&t.length>0?this.goToPage(1):requestAnimationFrame((()=>{r.forEach((t=>{t.style.display="",t.classList.remove(this.afs.options.get("hiddenClass")),requestAnimationFrame((()=>{this.animation.applyShowAnimation(t,this.options.animationType||"fade")}))}))}))}renderPagination(){const{currentPage:t,totalPages:i}=this.afs.state.getState().pagination;if(this.container.innerHTML="",i<=1)return void(this.container.style.display="none");this.container.style.display="flex";const s=this.createPaginationControls(t,i);this.container.appendChild(s)}createPaginationControls(t,i){const s=document.createDocumentFragment();if(this.options.showPrevNext){const i=this.createPageButton("‹",t-1,{disabled:1===t,class:"afs-pagination-prev"});s.appendChild(i)}s.appendChild(this.createPageButton("1",1,{active:1===t}));const e=this.calculatePageRange(t,i);e.start>2&&s.appendChild(this.createEllipsis());for(let n=e.start;n<=e.end;n++)1!==n&&n!==i&&s.appendChild(this.createPageButton(""+n,n,{active:t===n}));if(e.end<i-1&&s.appendChild(this.createEllipsis()),i>1&&s.appendChild(this.createPageButton(""+i,i,{active:t===i})),this.options.showPrevNext){const e=this.createPageButton("›",t+1,{disabled:t===i,class:"afs-pagination-next"});s.appendChild(e)}return s}createPageButton(t,i,{active:s=!1,disabled:e=!1,class:n=""}={}){const r=document.createElement("button");return r.textContent=t,r.dataset.page=i,r.classList.add(this.options.pageButtonClass||"afs-page-button"),n&&r.classList.add(n),s&&r.classList.add(this.options.activePageClass||"afs-page-active"),e&&(r.disabled=!0),r}createEllipsis(){const t=document.createElement("span");return t.textContent="...",t.classList.add("afs-pagination-ellipsis"),t}calculatePageRange(t,i){const s=this.options.maxButtons||7;let e=Math.max(2,t-Math.floor((s-3)/2)),n=Math.min(i-1,e+s-3);return n-e<s-3&&(e=Math.max(2,n-(s-3))),{start:e,end:n}}goToPage(t){const i=this.afs.state.getState().pagination,s=Math.max(1,Math.min(t,i.totalPages));s!==i.currentPage&&(this.afs.state.setState("pagination.currentPage",s),this.update(),this.options.scrollToTop&&setTimeout((()=>this.scrollToTop()),100),this.afs.emit("pageChanged",{previousPage:i.currentPage,currentPage:s,totalPages:i.totalPages}))}scrollToTop(){const t=document.querySelector(this.afs.options.get("pagination.container"));t?window.scrollTo({top:t.offsetTop-this.options.scrollOffset,behavior:"smooth"}):this.afs.logger.warn("Scroll container not found.")}setPaginationMode(t){this.afs.logger.debug("Setting pagination mode to: "+t),this.afs.options.set("pagination.enabled",t),t?this.setupPagination():(this.container.remove(),this.showAllItems()),this.afs.emit("paginationModeChanged",{enabled:t})}showAllItems(){const t=Array.from(this.afs.state.getState().items.visible);requestAnimationFrame((()=>{t.forEach((t=>{t.style.display="",t.classList.remove(this.afs.options.get("hiddenClass")),requestAnimationFrame((()=>{this.animation.applyShowAnimation(t,this.options.animationType||"fade")}))}))}))}}class m{constructor(t){this.afs=t,this.defaultParams=new URLSearchParams,this.setupPopStateHandler(),setTimeout((()=>{this.loadFromURL()}),0)}setupPopStateHandler(){window.addEventListener("popstate",(()=>{this.loadFromURL()}))}updateURL(){this.afs.logger.debug("Updating URL state");const t=new URLSearchParams,i=this.afs.state.getState(),s=this.afs.filter.getActiveFilters();i.filters.current=s,this.addFiltersToURL(t,i),this.addRangesToURL(t,i),this.addSearchToURL(t,i),this.addSortToURL(t,i),this.addPaginationToURL(t,i),this.pushState(t)}addFiltersToURL(t,i){const s=i.filters;if(0===s.current.size||1===s.current.size&&s.current.has("*"))return;const e={};for(const t of s.current)if("*"!==t){const[i,s]=t.split(":");e[i]||(e[i]=new Set),e[i].add(s)}Object.entries(e).forEach((([i,s])=>{t.set(i,Array.from(s).join(","))})),"OR"!==s.mode&&t.set("filterMode",s.mode.toLowerCase()),s.groups.size>0&&"OR"!==s.groupMode&&t.set("groupMode",s.groupMode.toLowerCase()),s.groups.forEach(((i,s)=>{t.set("group_"+s,Array.from(i.filters).join(",")),"OR"!==i.operator&&t.set("groupOp_"+s,i.operator.toLowerCase())}))}addRangesToURL(t,i){i.filters.ranges.forEach(((i,s)=>{const{currentMin:e,currentMax:n}=i;e===i.min&&n===i.max||t.set("range_"+s,`${e},${n}`)})),i.filters.dateRanges.forEach(((i,s)=>{const{start:e,end:n}=i;t.set("dateRange_"+s,`${e.toISOString()},${n.toISOString()}`)}))}addSearchToURL(t,i){i.search.query&&t.set("search",i.search.query)}addSortToURL(t,i){if(i.sort.current){const{key:s,direction:e}=i.sort.current;t.set("sort",`${s},${e}`)}}addPaginationToURL(t,i){const{currentPage:s,itemsPerPage:e}=i.pagination;this.afs.options.get("pagination.enabled")&&(s>1&&t.set("page",""+s),e!==this.afs.options.get("pagination.itemsPerPage")&&t.set("perPage",""+e))}pushState(t){const i=""+t,s=`${window.location.pathname}${i?"?"+i:""}`;s!==window.location.href&&(window.history.pushState({},"",s),this.afs.logger.debug("URL updated:",s))}loadFromURL(){this.afs.logger.debug("Loading state from URL");const t=new URLSearchParams(window.location.search);try{this.afs.filter&&this.afs.filter.clearAllFilters();const i=t.get("filterMode");i&&this.afs.filter&&this.afs.filter.setFilterMode(i.toUpperCase());const s=Array.from(t.entries()).filter((([t])=>this.isRegularFilter(t)));s.length>0&&this.afs.filter&&(this.afs.filter.activeFilters.clear(),s.forEach((([t,i])=>{i.split(",").forEach((i=>{const s=`${t}:${i}`;this.afs.filter.activeFilters.add(s),this.afs.filter.filterButtons.forEach(((t,i)=>{t===s?i.classList.add(this.afs.options.get("activeClass")):"*"===t&&i.classList.remove(this.afs.options.get("activeClass"))}))}))}))),this.afs.filter&&this.afs.filter.applyFilters();const e=t.get("search");e&&this.afs.search&&this.afs.search.setValue(e);const n=t.get("sort");if(n&&this.afs.sort){const[t,i]=n.split(",");this.afs.sort.sort(t,i)}const r=parseInt(t.get("page"));!isNaN(r)&&this.afs.pagination&&this.afs.pagination.goToPage(r),this.afs.emit("urlStateLoaded",{params:Object.fromEntries(t)}),this.afs.logger.info("State loaded from URL")}catch(t){this.afs.logger.error("Error loading state from URL:",t),this.afs.filter&&this.afs.filter.clearAllFilters()}}processFiltersFromURL(t){const i=this.afs.state.getState();let s=!1;const e=t.get("filterMode");e&&(i.filters.mode=e.toUpperCase());const n=t.get("groupMode");n&&(i.filters.groupMode=n.toUpperCase());for(const[e,n]of t.entries())this.isRegularFilter(e)&&n.split(",").filter(Boolean).forEach((t=>{s=!0,i.filters.current.add(`${e}:${t}`)}));for(const[s,e]of t.entries())if(s.startsWith("group_")){const n=s.replace("group_",""),r=t.get("groupOp_"+n)?.toUpperCase()||"OR";i.filters.groups.set(n,{filters:new Set(e.split(",")),operator:r})}s||0!==i.filters.groups.size||i.filters.current.add("*")}processRangesFromURL(t){const i=this.afs.state.getState();for(const[s,e]of t.entries())if(s.startsWith("range_")){const t=s.replace("range_",""),[n,r]=e.split(",").map(Number);i.filters.ranges.set(t,{currentMin:n,currentMax:r})}for(const[s,e]of t.entries())if(s.startsWith("dateRange_")){const t=s.replace("dateRange_",""),[n,r]=e.split(",").map((t=>new Date(t)));i.filters.dateRanges.set(t,{start:n,end:r})}}processSearchFromURL(t){const i=t.get("search")||"";this.afs.state.setState("search.query",i),this.afs.options.get("searchInput")&&(this.afs.options.get("searchInput").value=i)}processSortFromURL(t){const i=t.get("sort");if(i){const[t,s]=i.split(",");this.afs.state.setState("sort.current",{key:t,direction:s})}}processPaginationFromURL(t){const i=parseInt(t.get("page"))||1,s=parseInt(t.get("perPage"))||this.afs.options.get("pagination.itemsPerPage");this.afs.state.setState("pagination",{currentPage:i,itemsPerPage:s})}isRegularFilter(t){return!(["search","sort","page","perPage","filterMode","groupMode"].includes(t)||t.startsWith("group_")||t.startsWith("groupOp_")||t.startsWith("range_")||t.startsWith("dateRange_"))}clearURL(){window.history.pushState({},"",window.location.pathname),this.afs.state.reset(),this.afs.filter&&this.afs.filter.clearAllFilters()}getURLParams(){return new URLSearchParams(window.location.search)}hasParams(){return window.location.search.length>1}getParam(t){return new URLSearchParams(window.location.search).get(t)}}class p{constructor(t){this.afs=t,this.activeRanges=new Map,this.options=this.afs.options.get("slider"),this.afs.styleManager||(this.afs.styleManager=new n(this.afs.options)),this.afs.styleManager.applyStyles()}addRangeSlider({key:t,type:i,container:s,min:e,max:n,step:r=1,ui:a}){if(this.afs.logger.debug("Adding range slider for "+t),!s)return void this.afs.logger.error("Container element required for range slider");const o=this.calculateMinMax(t,i);e=e??o.min,n=n??o.max;const h={...this.afs.options.get("styles.slider.ui")||{showHistogram:!1,bins:10},...a},c=h.showHistogram?this.calculateHistogramData(t,h.bins):{counts:[],binEdges:[],max:0},l=this.createSliderElements(c,h),u=this.initializeState(e,n,r,i);u.ui=h,h.showHistogram&&(u.histogram=c),this.appendElements(s,l),this.setupEventHandlers(l,u,t),this.activeRanges.set(t,{state:u,elements:l}),this.updateSliderUI(t),h.showHistogram&&this.setupHistogramHighlight(l,u,c.binEdges),this.afs.logger.info("Range slider added for "+t)}calculateMinMax(t,i){const s=Array.from(this.afs.items).map((s=>{const e=s.dataset[t];return"date"===i?new Date(e).getTime():parseFloat(e)})).filter((t=>!isNaN(t)));return{min:Math.min(...s),max:Math.max(...s)}}createSliderElements(t,i){const s=(this.afs.options.get("styles")||this.afs.styleManager.defaultStyles).colors||this.afs.styleManager.defaultStyles.colors,e=this.afs.options.get("slider")||{},n=document.createElement("div");n.className="afs-range-container";const r=document.createElement("div");r.className=e.containerClass;const a=document.createElement("div");if(a.className=e.trackClass,i?.showHistogram&&t?.counts?.length>0){const i=this.createHistogramBars(t,s);r.appendChild(i)}const o=document.createElement("div");o.className=e.selectedClass;const h=document.createElement("div");h.className=e.thumbClass;const c=document.createElement("div");c.className=e.thumbClass;const l=document.createElement("div");l.className=e.valueClass;const u=document.createElement("div");return u.className=e.valueClass,r.appendChild(a),r.appendChild(o),r.appendChild(h),r.appendChild(c),r.appendChild(l),r.appendChild(u),n.appendChild(r),{container:n,slider:r,track:a,selectedRange:o,minThumb:h,maxThumb:c,minValue:l,maxValue:u}}createHistogram(t,i){const s=document.createElement("div");return s.className="afs-histogram",t.forEach(((t,e)=>{const n=document.createElement("div");n.className="afs-histogram-bar",n.style.height=t+"%",n.style.backgroundColor=i.histogram,s.appendChild(n)})),s}calculateHistogramData(t,i=10){try{const s=Array.from(this.afs.items).map((i=>parseFloat(i.dataset[t]))).filter((t=>!isNaN(t)));if(0===s.length)return{counts:[],binEdges:[],max:0};const e=Math.min(...s),n=Math.max(...s),r=(n-e)/i,a=Array(i).fill(0),o=Array(i+1);for(let t=0;t<=i;t++)o[t]=e+t*r;s.forEach((t=>{t!==n?a[Math.floor((t-e)/r)]++:a[a.length-1]++}));const h=Math.max(...a);return{counts:a.map((t=>Math.max(20,Math.round(t/h*100)))),binEdges:o,max:h,min:e,max:n}}catch(t){return this.afs.logger.error("Error calculating histogram:",t),{counts:[],binEdges:[],max:0}}}setupHistogramHighlight(t,i,s){const e=t.slider.querySelectorAll(".afs-histogram-bar"),n=()=>{const t=i.currentMin,n=i.currentMax;e.forEach(((i,e)=>{s[e]>=t&&s[e+1]<=n?i.classList.add("active"):i.classList.remove("active")}))};this.afs.on("rangeFilter",(()=>n())),n()}createHistogramBars(t,i){const{counts:s}=t,e=document.createElement("div");return e.className="afs-histogram",s.forEach((t=>{const i=document.createElement("div");i.className="afs-histogram-bar",i.style.height=t+"%",e.appendChild(i)})),e}initializeState(t,i,s,e){return{min:t,max:i,currentMin:t,currentMax:i,step:s,type:e,isDragging:!1}}appendElements(t,i){const{slider:s,track:e,selectedRange:n,minThumb:r,maxThumb:a,minValue:o,maxValue:h}=i;s.appendChild(e),s.appendChild(n),s.appendChild(r),s.appendChild(a),s.appendChild(o),s.appendChild(h),t.appendChild(s)}setupEventHandlers(t,i,s){const{minThumb:e,maxThumb:n}=t,r=e=>n=>{n.preventDefault(),i.isDragging=!0;const r=n=>{const r=(a=n).touches?a.touches[0]:a;var a;this.createMoveHandler(t,i,s,e)(r)},a=()=>{i.isDragging=!1,window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",a),window.removeEventListener("touchmove",r),window.removeEventListener("touchend",a),window.removeEventListener("touchcancel",a),this.applyFilter(s)};window.addEventListener("mousemove",r),window.addEventListener("mouseup",a),window.addEventListener("touchmove",r,{passive:!1}),window.addEventListener("touchend",a),window.addEventListener("touchcancel",a)};e.addEventListener("mousedown",r(!0)),e.addEventListener("touchstart",r(!0),{passive:!1}),n.addEventListener("mousedown",r(!1)),n.addEventListener("touchstart",r(!1),{passive:!1})}updateSliderUI(t){const{state:i,elements:s}=this.activeRanges.get(t),{minThumb:e,maxThumb:n,selectedRange:r,minValue:a,maxValue:o}=s,h=i.max-i.min,c=(i.currentMax-i.min)/h*100,l=Math.max(0,Math.min((i.currentMin-i.min)/h*100,100)),u=Math.max(0,Math.min(c,100));e.style.left=l+"%",n.style.left=u+"%",r.style.left=l+"%",r.style.width=u-l+"%";const d="date"===i.type?t=>new Date(t).toLocaleDateString():t=>t.toFixed(2);a.textContent=d(i.currentMin),o.textContent=d(i.currentMax),a.style.left=l+"%",o.style.left=u+"%",a.style.transform=l<5?"translateX(0)":l>95?"translateX(-100%)":"translateX(-50%)",o.style.transform=u<5?"translateX(0)":u>95?"translateX(-100%)":"translateX(-50%)"}createMoveHandler(t,i,s,e){this.afs.logger.debug("Creating move handler for "+s);const{track:n}=t;return h((t=>{const r=t.touches?t.touches[0].clientX:t.clientX,a=n.getBoundingClientRect(),o=a.width,h=.05*o,c=Math.round((i.min+(i.max-i.min)*Math.min(Math.max(0,(r-a.left-h)/(o-2*h)),1))/i.step)*i.step;e?i.currentMin=Math.min(c,i.currentMax):i.currentMax=Math.max(c,i.currentMin),this.updateSliderUI(s)}),16)}applyFilter(t){this.afs.logger.debug("Applying range filter for "+t);const{state:i}=this.activeRanges.get(t);this.afs.items.forEach((s=>{const e="date"===i.type?new Date(s.dataset[t]).getTime():parseFloat(s.dataset[t]);e>=i.currentMin&&e<=i.currentMax?this.afs.showItem(s):this.afs.hideItem(s)})),this.afs.updateCounter(),this.afs.urlManager.updateURL(),this.afs.emit("rangeFilter",{key:t,min:i.currentMin,max:i.currentMax})}getRangeValues(t){const i=this.activeRanges.get(t);return i?{min:i.state.currentMin,max:i.state.currentMax,type:i.state.type}:null}setRangeValues(t,i,s){const e=this.activeRanges.get(t);e&&(e.state.currentMin=i,e.state.currentMax=s,this.updateSliderUI(t),this.applyFilter(t))}removeRangeSlider(t){const i=this.activeRanges.get(t);i&&(i.elements.slider.remove(),this.activeRanges.delete(t),this.afs.logger.info("Range slider removed for "+t))}}class g{constructor(t){this.afs=t,this.activeDateRanges=new Map,this.defaultFormat=this.afs.options.get("dateFormat")||"YYYY-MM-DD"}addDateRange({key:t,container:i,minDate:s,maxDate:e,format:n=this.defaultFormat}){if(this.afs.logger.debug("Adding date range for "+t),!i)return void this.afs.logger.error("Container element required for date range");const r=this.calculateMinMaxDates(t);s=s??r.min,e=e??r.max;const a=this.createDateElements(),o=this.initializeState(s,e,n);this.appendElements(i,a),this.setupEventHandlers(a,o,t),this.activeDateRanges.set(t,{state:o,elements:a}),this.updateDateUI(t),this.afs.logger.info("Date range added for "+t)}calculateMinMaxDates(t){try{const i=Array.from(this.afs.items).map((i=>{if(!i||!i.dataset||!i.dataset[t])return null;const s=new Date(i.dataset[t]);return isNaN(s.getTime())?null:s})).filter((t=>null!==t));if(0===i.length){const t=new Date;return{min:new Date(t.getFullYear(),0,1),max:new Date(t.getFullYear(),11,31)}}return{min:new Date(Math.min(...i)),max:new Date(Math.max(...i))}}catch(t){this.afs.logger.error("Error calculating date range:",t);const i=new Date;return{min:new Date(i.getFullYear(),0,1),max:new Date(i.getFullYear(),11,31)}}}createDateElements(){this.afs.logger.debug("Creating date picker elements");const t=document.createElement("div");t.className="afs-date-range-container";const i=document.createElement("div");i.className="afs-date-input-wrapper";const s=document.createElement("label");s.textContent="Start Date";const e=document.createElement("input");e.type="date",e.className="afs-date-input start-date";const n=document.createElement("div");n.className="afs-date-input-wrapper";const r=document.createElement("label");r.textContent="End Date";const a=document.createElement("input");return a.type="date",a.className="afs-date-input end-date",i.appendChild(s),i.appendChild(e),n.appendChild(r),n.appendChild(a),t.appendChild(i),t.appendChild(n),{container:t,startInput:e,endInput:a}}initializeState(t,i,s){return{minDate:t,maxDate:i,currentStartDate:t,currentEndDate:i,format:s}}appendElements(t,i){t.appendChild(i.container)}setupEventHandlers(t,i,s){this.afs.logger.debug("Setting up event handlers for date range "+s);const{startInput:e,endInput:n}=t,r=h((()=>{const t=new Date(e.value),r=new Date(n.value);isNaN(t.getTime())||isNaN(r.getTime())||(i.currentStartDate=t,i.currentEndDate=r,this.applyDateFilter(s))}),300);e.addEventListener("change",r),n.addEventListener("change",r)}updateDateUI(t){try{const{state:i,elements:s}=this.activeDateRanges.get(t),{startInput:e,endInput:n}=s,r=t=>{try{const i=new Date(t);if(isNaN(i.getTime()))throw Error("Invalid date");return i.toISOString().split("T")[0]}catch(t){return this.afs.logger.error("Error formatting date:",t),""}};e.min=r(i.minDate),e.max=r(i.maxDate),n.min=r(i.minDate),n.max=r(i.maxDate),e.value=r(i.currentStartDate),n.value=r(i.currentEndDate)}catch(t){this.afs.logger.error("Error updating date UI:",t)}}applyDateFilter(t){this.afs.logger.info("Applying date filter for "+t);const{state:i}=this.activeDateRanges.get(t);this.afs.items.forEach((s=>{try{if(!s||!s.dataset||!s.dataset[t])return void this.afs.hideItem(s);const e=new Date(s.dataset[t]);if(isNaN(e.getTime()))return void this.afs.hideItem(s);const n=new Date(i.currentStartDate);n.setHours(0,0,0,0);const r=new Date(i.currentEndDate);r.setHours(23,59,59,999);const a=new Date(e);a.setHours(0,0,0,0),a>=n&&a<=r?this.afs.showItem(s):this.afs.hideItem(s)}catch(t){this.afs.logger.error("Error filtering item by date:",t),this.afs.hideItem(s)}})),this.afs.updateCounter(),this.afs.urlManager.updateURL(),this.afs.emit("dateFilter",{key:t,startDate:i.currentStartDate,endDate:i.currentEndDate})}getDateRange(t){const i=this.activeDateRanges.get(t);return i?{startDate:i.state.currentStartDate,endDate:i.state.currentEndDate}:null}setDateRange(t,i,s){const e=this.activeDateRanges.get(t);e&&(e.state.currentStartDate=i,e.state.currentEndDate=s,this.updateDateUI(t),this.applyDateFilter(t))}removeDateRange(t){const i=this.activeDateRanges.get(t);i&&(i.elements.container.remove(),this.activeDateRanges.delete(t),this.afs.logger.info("Date range removed for "+t))}}const f="1.1.0";t.AFS=class extends r{constructor(t={}){super(),this.initializeCore(t)}initializeCore(t){try{this.options=new s(t),this.logger=new i(this.options.get("debug")||!1,this.options.get("logLevel")||"info"),this.state=new e,this.styleManager=new n(this.options),this.initializeDOM(),this.initializeFeatures(),this.setupLifecycle()}catch(t){throw t}}initializeDOM(){if(this.logger.debug("Initializing DOM elements"),this.container=document.querySelector(this.options.get("containerSelector")),!this.container)throw Error("Container not found: "+this.options.get("containerSelector"));this.items=this.container.querySelectorAll(this.options.get("itemSelector")),0===this.items.length&&this.logger.warn("No items found in container"),this.state.setState("items.total",this.items.length),this.state.setState("items.visible",new Set(this.items))}initializeFeatures(){this.logger.debug("Initializing features"),this.filter=new o(this),this.search=new l(this),this.sort=new u(this),this.rangeFilter=new p(this),this.urlManager=new m(this),this.dateFilter=new g(this),this.pagination=new d(this),this.inputRangeFilter=new c(this),this.styleManager.applyStyles(),this.urlManager.loadFromURL()}setupLifecycle(){this.options.get("responsive")&&window.addEventListener("resize",this.handleResize.bind(this)),this.options.get("preserveState")&&document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this)),this.options.get("observeDOM")&&this.setupMutationObserver(),this.emit("initialized",{itemCount:this.items.length,options:this.options.export()})}showItem(t){const i=this.state.getState().items.visible;i.add(t),this.state.setState("items.visible",i),t.classList.remove(this.options.get("hiddenClass")),t.style.opacity="0",t.style.transform="scale(0.95)",t.style.display="";const s=this.options.get("transitionClass")||"afs-transition";t.classList.contains(s)||t.classList.add(s),requestAnimationFrame((()=>{requestAnimationFrame((()=>{t.style.opacity="1",t.style.transform="scale(1)"}))}));const e=this.options.get("animationDuration")||300;setTimeout((()=>{i.has(t)&&(t.style.transform="",t.style.opacity="")}),e)}hideItem(t){const i=this.state.getState().items.visible;i.delete(t),this.state.setState("items.visible",i);const s=this.options.get("transitionClass")||"afs-transition";t.classList.contains(s)||t.classList.add(s),requestAnimationFrame((()=>{t.style.opacity="0",t.style.transform="scale(0.95)"}));const e=this.options.get("animationDuration")||300;setTimeout((()=>{i.has(t)||(t.classList.add(this.options.get("hiddenClass")),t.style.transform="",t.style.opacity="")}),e)}addItems(t){const i=Array.isArray(t)?t:[t],s=document.createDocumentFragment();i.forEach((t=>{s.appendChild(t),this.state.getState().items.visible.add(t)})),this.container.appendChild(s),this.items=this.container.querySelectorAll(this.options.get("itemSelector")),this.filter.applyFilters()}removeItems(t){const i=Array.isArray(t)?t:[t],s=this.state.getState().items.visible;i.forEach((t=>{s.delete(t),t.remove()})),this.items=this.container.querySelectorAll(this.options.get("itemSelector")),this.updateCounter()}saveState(){if(!this.options.get("preserveState"))return;const t={filters:Array.from(this.filter.getActiveFilters()),search:this.search.getValue(),sort:this.sort.getCurrentSort(),pagination:this.pagination.getPageInfo(),timestamp:Date.now()};localStorage.setItem("afs_state",JSON.stringify(t)),this.logger.debug("State saved")}restoreState(){if(this.options.get("preserveState"))try{const t=localStorage.getItem("afs_state");if(!t)return;const i=JSON.parse(t);if(Date.now()-i.timestamp>this.options.get("stateExpiry"))return void localStorage.removeItem("afs_state");this.setState(i),this.logger.debug("State restored")}catch(t){this.logger.error("Error restoring state:",t)}}getState(){return this.state.export()}setState(t){this.state.import(t),this.refresh()}updateCounter(){const t=document.querySelector(this.options.get("counterSelector"));if(t)try{const i=this.items.length,e=this.state.getState().items.visible.size,n=i-e,r=this.options.get("counter")||s.defaults.counter,a=r.template||"Showing {visible} of {total}",o=r.formatter||(t=>t.toLocaleString()),h=o(e),c=o(i),l=o(n);let u=a.replace("{visible}",h).replace("{total}",c).replace("{filtered}",l);n>0&&r.showFiltered&&(u+=" "+(r.filteredTemplate||"({filtered} filtered)").replace("{filtered}",l)),0===e&&r.noResultsTemplate&&(u=r.noResultsTemplate),t.textContent=u,this.emit("counterUpdated",{total:i,visible:e,filtered:n,formattedTotal:c,formattedVisible:h,formattedFiltered:l})}catch(i){this.logger.error("Error updating counter:",i),t.textContent=`${this.state.getState().items.visible.size}/${this.items.length}`}}updateOptions(t){this.options.update(t),this.styleManager.updateStyles(t),this.refresh()}refresh(){this.logger.debug("Refreshing AFS"),this.items=this.container.querySelectorAll(this.options.get("itemSelector")),this.state.setState("items.total",this.items.length),this.filter.applyFilters(),this.search.search(this.search.getValue()),this.pagination.update(),this.emit("refreshed",{itemCount:this.items.length})}handleResize=(()=>h((()=>{this.emit("resize"),this.refresh()}),250))();handleVisibilityChange(){document.hidden?(this.emit("hidden"),this.saveState()):(this.emit("visible"),this.restoreState())}setupMutationObserver(){new MutationObserver((t=>{t.some((t=>"childList"===t.type))&&this.refresh()})).observe(this.container,{childList:!0,subtree:!0})}getVersion(){return f}isFeatureSupported(t){return!!{search:!!this.search,pagination:!0,animation:void 0!==document.createElement("div").style.transition,urlState:"function"==typeof window.history.pushState,localStorage:(()=>{try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(t){return!1}})()}[t]}destroy(){this.logger.debug("Destroying AFS instance"),window.removeEventListener("resize",this.handleResize),document.removeEventListener("visibilitychange",this.handleVisibilityChange),this.filter.destroy(),this.search.destroy(),this.sort.destroy(),this.pagination.destroy(),this.rangeFilter.destroy(),this.styleManager.removeStyles(),this.state.reset(),localStorage.removeItem("afs_state"),this.items.forEach((t=>{t.style="",t.classList.remove(this.options.get("hiddenClass"),this.options.get("activeClass"))})),this.emit("destroyed")}},t.VERSION=f},"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((t="undefined"!=typeof globalThis?globalThis:t||self).AFS={});
//# sourceMappingURL=afs.legacy.js.map
